generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id           Int            @id @default(autoincrement())
  googleId     String         @unique
  email        String         @unique
  name         String
  picture      String
  role         String?
  createdAt    DateTime       @default(now())
  session      Session[]
  GoogleTokens GoogleTokens[]

  @@index([googleId], name: "google_id_index") // Add the index here
}

model Session {
  id        String   @id
  userId    Int
  expiresAt DateTime

  user User @relation(fields: [userId], references: [id])
}

model GoogleTokens {
  id                          Int      @id @default(autoincrement())
  userId                      Int      @unique
  accessToken                 String
  accessTokenExpiresAt        DateTime
  accessTokenExpiresInSeconds Int
  idToken                     String
  refreshToken                String?
  scopes                      String
  tokenType                   String
  data                        Json?
  hasRefreshToken             Boolean  @default(false)
  hasScopes                   Boolean  @default(false)
  user                        User     @relation(fields: [userId], references: [id])

  @@map("google_tokens")
}
